window.typing_field=document.getElementById("typing-pinyin");function init_type_question(){console.log(window.answer),console.log(window.pinyin),window.answer_bak=window.answer,window.pinyin=window.answer=void 0,null===document.getElementById("typeans")&&null!==typing_field&&(pinyin=typing_field.innerText.trim(),typing_field.hidden=!1,typing_field.innerHTML="<input type='text' id='typeans' onchange='_myTypeAnsChange()' onkeypress='_myTypeAnsKey()'>")}function init_type_answer(){pinyin!==void 0&&answer_bak!==void 0&&(document.getElementById("typing-orig").hidden=!0,typing_field.innerHTML="Loading...",typing_field.hidden=!1,checkDiffPatchMatch())}function set_result(){var a=new diff_match_patch;result=a.diff_main(answer_bak,pinyin),answer_bak=void 0;var b=(a,b)=>`<span class='type${a}'>${b}</span>`,c="",d="";for(e of result)if(0>e[0])c+=b("Bad",e[1]);else if(0<e[0])d+=b("Missed",e[1]);else{var f=b("Good",e[1]);c+=f,d+=f}typing_field.innerHTML="<code id='typeans'>"+c+"<br>\u2193<br>"+d+"</code>",typing_field.hidden=!1}function checkDiffPatchMatch(){null==window.diff_match_patch?setTimeout(function(){checkDiffPatchMatch()},200):set_result()}function _myTypeAnsChange(){answer=document.getElementById("typeans").value.trim()}function _myTypeAnsKey(){_myTypeAnsChange(),13===window.event.keyCode&&window.study!==void 0&&window.study.drawAnswer!==void 0&&study.drawAnswer()}init_type_question();