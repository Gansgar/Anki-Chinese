function loadSyllables(){let a=new XMLHttpRequest;return a.overrideMimeType("application/json"),a.open("GET","https://raw.githubusercontent.com/pepebecker/pinyin-split/master/syllables.json",0),a.send(),JSON.parse(a.responseText)}window.syllables="undefined"==typeof window.syllables?loadSyllables():window.syllables,window.normalizePinyin=a=>(a=a.normalize("NFD").replace(/\u0304|\u0301|\u030c|\u0300/g,""),a.normalize("NFC").replace(/(\w|Ã¼)[1-5]/gi,"$1").toLowerCase()),window.split=(a,b=!1,c=!1)=>{const d=[];let e=!1,f=a.length;for(;0<f;){let g=f,h=!1;for(;0<g;){const b=a.substring(f-g,f);if(syllables.includes(normalizePinyin(b))){h=!0,d.push(c?[b]:b),f-=g-1;break}g--}if(!h&&b){const b=d.length-1,c=d[b];f===a.length||"object"==typeof c||e?d.push(a[f-1]):"string"==typeof c&&(d[b]=a[f-1]+c)}f--,e=h}return d.reverse()},window.pinyin_split=split;var hanziWriter;function loadCharacter(a,b){var c=new XMLHttpRequest;c.overrideMimeType("application/json"),c.open("GET","https://cdn.jsdelivr.net/npm/hanzi-writer-data@2.0/"+a+".json",!0),c.send(null),c.onerror=function(a){document.body.append("An error occured during transation ("+a+")")},c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(200===c.status?b(JSON.parse(c.responseText)):document.body.append("An error occured during download of data ("+c.status+")"))}}function prepareHanzi(a,b,c,d,e){function f(){if(k=-1,null!=d){var b=pinyin_split(j,!0,!0),c="";let e=0;for(let a of b)Array.isArray(a)?(c+=e==l?"<u>"+a[0]+"</u>":a[0],e++):c+=a;d.innerHTML=c+" ("+a.substr(0,l)+"...)"}hanziWriter.quiz({onComplete:function(){setTimeout(function(){++l<a.length?(hanziWriter.setCharacter(a[l]),f()):(hanziWriter.cancelQuiz(),null!=e&&(e.hidden=!0),null!=d&&(d.innerHTML=j+" ("+a+") \u2713"))},1e3)},onCorrectStroke:function(a){k=a.strokeNum}})}null!=hanziWriter&&hanziWriter.cancelQuiz();let g=Math.min(b.clientWidth,512,2*window.innerHeight/3),h=b.getElementsByClassName("background-svg")[0].style;h.width=h.height=g;hanziWriter=HanziWriter.create(b.id,a[0],{width:g,height:g,showCharacter:!1,showOutline:!1,highlightOnComplete:!0,leniency:c,padding:0,charDataLoader:loadCharacter});let j="";null!=d&&(d.innerHTML=d.innerText,j=d.innerText);var k,l=0;f(),null!=e&&(e.onclick=function(){hanziWriter.highlightStroke(k+1)})}function onStart(){if(null!=window.HanziWriter){var a=document.getElementById("hanzi"),b=document.getElementById("character-target");if(null!=a&&null!=b){var c=1;document.getElementById("leniency")&&(c=1*document.getElementById("leniency").innerHTML),prepareHanzi(a.innerHTML,b,c,document.getElementById("pinyin"),document.getElementById("hint-button"))}}}function waitForScript(){setTimeout(function(){null==window.HanziWriter?waitForScript():onStart()},10)}waitForScript();